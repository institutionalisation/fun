struct ostream : public fstream {
	using fstream::fstream;
	void flush() {
		size_t written = write(fd,buf.x,t);
		// write(1,(void*)"oflush",7);
		if(written != t)
			exit(77);
		t = 0;
	}
	void put(const Char a) {
		buf.x[t++] = a;
		if(t==buf.size) flush();
	}
	tm<tn ...T>
	void operator()(T... a) {
		(s[]){ (wrap(a).write(this),0)... }; }
};